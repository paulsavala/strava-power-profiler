<!DOCTYPE html>
<html>
  <head>
    <title>Strava Power Profiler</title>
    <link rel=stylesheet type=text/css href='{{ url_for('static',filename='style.css')}}'>
    <link href="http://cdn.pydata.org/bokeh/release/bokeh-0.11.0.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="http://cdn.pydata.org/bokeh/release/bokeh-0.11.0.min.js"></script>
    <!-- jQuery stuff -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js">></script>
  	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script>
  		$(function() {
    	$( "#datepicker1" ).datepicker();
  		});
  		$(function() {
    	$( "#datepicker2" ).datepicker();
  		});
  	</script>
  	<!-- End Datepicker -->
    {{ script | safe }}
    <script>
    $(function() { 
    	{% for activity in recent_activities %}
			$('#activity_{{ activity.id }}')
			.mouseover(function() {
				$('#recent_segments').children().css('display', 'none');
				$('#segments_{{ activity.id }}').css('display', 'block'); 
			});
    	{% endfor %}
    });
    </script>
  </head>
  <body>
  	<div id="nav_bar">
  		<div id="user_pic"><img src="{{ url_for('static',filename='user_pic.jpg')}}" id="user_pic" alt="Pic"></img></div>
  		<div id="iowava">Power Profile</div>
  		<div id="username">{{ athlete.username }}</div>
  	</div>
  	<div id="graph">
  		<div id="bokeh_div">{{ div | safe }}</div>
  	</div>
  	<div id="options">
  		<div id="recent_rides">
			<form id='recent_rides_options' method='POST' action={{ url_for('update_rides') }}>
				From: <input type="text" id="datepicker1" name="datepicker_after"> 
				Until: <input type="text" id="datepicker2" name="datepicker_before">
				<input type="submit" value="Update">
			</form>
  		</div>
  	</div>
  	<div id="recents">
  		<div id="recent_rides">
  			<table>
  				{% for activity in recent_activities %}
  				<tr id="activity_{{ activity.id }}">
  					<td class="table_label">{{ activity.start_date_local.strftime('%a, %b %d') }}</td>
  					<td class="table_data">{{ activity.name }}</td>
  					<td class="table_data">{{ activity.distance }} </td>
  				</tr>
  				{% endfor %}
  			</table>
  		</div>
  		<div id="recent_segments">
  			{% for activity in recent_activities %}
  			<table id="segments_{{ activity.id }}">
  				{% for segment in activity_segments[activity.id] %}
  				<tr>
  					<td class="table_label">{{ segment.name }}</td>
  					<td class="table_data">Hill score = {{ segment.hill_score }}</td>
  					<td class="table_data">Var score = {{ segment.var_score }}</td>
  					<td class="table_data">Rank = {{ segment.ranking_score }}</td>
  				</tr>
  				{% endfor %}
  			</table>
			{% endfor %}
  		</div>
  	</div>
  	<div id="footer">
  		{{ debug }}
  	</div>
  </body>
</html>